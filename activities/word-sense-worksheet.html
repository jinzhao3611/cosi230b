<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worksheet: Word Sense Disambiguation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; color: #333; line-height: 1.5; font-size: 14px; }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        header { background: linear-gradient(135deg, #6a1b9a, #ab47bc); color: white; padding: 20px; margin-bottom: 20px; }
        header h1 { font-size: 1.5rem; margin-bottom: 8px; }
        header .subtitle { font-size: 0.95rem; opacity: 0.9; }
        header .meta { margin-top: 10px; font-size: 0.85rem; opacity: 0.8; display: flex; gap: 20px; flex-wrap: wrap; }
        header .author { margin-top: 8px; font-size: 0.85rem; opacity: 0.9; }
        .section { background: white; border-radius: 6px; padding: 18px; margin-bottom: 16px; box-shadow: 0 1px 4px rgba(0,0,0,0.08); }
        .section h2 { color: #6a1b9a; font-size: 1.15rem; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid #e0e0e0; }
        .definition-box { background: #f3e5f5; border-left: 3px solid #ab47bc; padding: 12px 15px; margin: 12px 0; }
        .word-box { background: #e8f5e9; border: 1px solid #a5d6a7; border-radius: 6px; padding: 12px; margin: 12px 0; }
        .word-box .target-word { font-size: 1.3rem; font-weight: 700; color: #6a1b9a; }
        .sense-card { background: #fafafa; border: 1px solid #e0e0e0; border-radius: 6px; padding: 12px; margin: 10px 0; }
        .sense-card .sense-id { font-weight: 600; color: #6a1b9a; }
        .sense-card .sense-def { margin: 5px 0; }
        .sense-card .sense-example { font-style: italic; color: #666; font-size: 0.9rem; }
        .sentence-box { background: #fff8e1; border: 1px solid #ffcc02; border-radius: 6px; padding: 14px; margin: 12px 0; }
        .sentence-box .label { font-weight: 600; color: #f57c00; margin-bottom: 8px; }
        .sentence-box .sentence { font-size: 1.05rem; }
        .sentence-box .target { background: #ffeb3b; padding: 2px 6px; border-radius: 3px; font-weight: 600; }
        .question-box { background: #f5f5f5; border: 1px solid #ddd; border-radius: 6px; padding: 14px; margin: 12px 0; }
        .question-box .q-header { font-weight: 600; color: #6a1b9a; margin-bottom: 10px; }
        .sense-options { display: flex; flex-direction: column; gap: 8px; margin: 10px 0; }
        .sense-option { display: flex; align-items: flex-start; gap: 8px; padding: 8px; border: 1px solid #e0e0e0; border-radius: 4px; cursor: pointer; }
        .sense-option:hover { background: #f3e5f5; }
        .sense-option input { margin-top: 3px; width: 18px; height: 18px; }
        .checkbox-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 6px; margin: 10px 0; }
        .checkbox-option, .radio-option { display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.9rem; }
        .checkbox-option input, .radio-option input { width: 16px; height: 16px; cursor: pointer; }
        textarea { width: 100%; min-height: 50px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: inherit; font-size: 0.9rem; resize: vertical; margin-top: 4px; }
        textarea:focus { outline: none; border-color: #ab47bc; }
        .input-group { margin: 10px 0; }
        .input-group label { display: block; font-weight: 500; margin-bottom: 4px; color: #555; font-size: 0.9rem; }
        .choices-container { display: none; margin-top: 10px; }
        .choices-container.show { display: block; }
        .toggle-btn { background: #e0e0e0; border: 1px solid #ccc; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; }
        .toggle-btn.active { background: #ab47bc; color: white; border-color: #ab47bc; }
        .takeaway-box { background: #e8f5e9; border: 1px solid #a5d6a7; border-radius: 6px; padding: 14px; margin: 12px 0; }
        .takeaway-box h3 { color: #388e3c; margin-bottom: 8px; font-size: 1rem; }
        .takeaway-box ul { margin-left: 18px; font-size: 0.9rem; }
        .toolbar { position: fixed; bottom: 15px; right: 15px; display: flex; gap: 8px; }
        .toolbar button { padding: 10px 16px; border: none; border-radius: 6px; font-size: 0.9rem; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
        .btn-print { background: #ab47bc; color: white; }
        .btn-clear { background: #e74c3c; color: white; }
        @media print { body { background: white; } .section { box-shadow: none; border: 1px solid #ddd; break-inside: avoid; } .toolbar { display: none; } .choices-container { display: block !important; } .toggle-btn { display: none; } }
    </style>
</head>
<body>
    <header>
        <div class="container" style="padding: 0;">
            <h1>Worksheet: Word Sense Disambiguation (WSD)</h1>
            <div class="subtitle">Determining which meaning a word has in context</div>
            <div class="meta">
                <span><strong>Course:</strong> Natural Language Annotation for Machine Learning</span>
                <span><strong>Task Type:</strong> Classification over sense inventory</span>
            </div>
            <div class="author"><strong>Author:</strong> Jin Zhao</div>
        </div>
    </header>

    <div class="container">
        <section class="section">
            <h2>Background</h2>
            <p>Many words have multiple meanings (senses). Word Sense Disambiguation (WSD) is the task of determining which sense a word has in a given context.</p>

            <div class="definition-box">
                <p><strong>Word Sense Disambiguation:</strong> Given a target word in context and a predefined sense inventory (like WordNet), identify which sense is intended.</p>
            </div>

            <h3>Why WSD is Hard</h3>
            <ul style="margin: 8px 0 8px 20px; font-size: 0.9rem;">
                <li>Sense distinctions can be subtle</li>
                <li>Context may not provide enough information</li>
                <li>Sense inventories may be too fine-grained or too coarse</li>
                <li>Some uses fall between or combine multiple senses</li>
            </ul>
        </section>

        <section class="section">
            <h2>Part 1: Clear Cases</h2>
            <div class="word-box">
                <div class="target-word">bank</div>
            </div>

            <div class="sense-card">
                <div class="sense-id">Sense 1:</div>
                <div class="sense-def">A financial institution that accepts deposits and channels the money into lending activities</div>
                <div class="sense-example">Example: "I need to go to the bank to deposit my paycheck."</div>
            </div>
            <div class="sense-card">
                <div class="sense-id">Sense 2:</div>
                <div class="sense-def">The sloping land beside a body of water</div>
                <div class="sense-example">Example: "We had a picnic on the river bank."</div>
            </div>

            <div class="sentence-box">
                <div class="label">Sentence 1:</div>
                <div class="sentence">"The fisherman sat on the <span class="target">bank</span> and cast his line into the water."</div>
            </div>
            <div class="sense-options">
                <label class="sense-option"><input type="radio" name="s1" value="1"> Sense 1: Financial institution</label>
                <label class="sense-option"><input type="radio" name="s1" value="2"> Sense 2: Land beside water</label>
            </div>

            <div class="sentence-box">
                <div class="label">Sentence 2:</div>
                <div class="sentence">"The <span class="target">bank</span> approved her loan application after reviewing her credit history."</div>
            </div>
            <div class="sense-options">
                <label class="sense-option"><input type="radio" name="s2" value="1"> Sense 1: Financial institution</label>
                <label class="sense-option"><input type="radio" name="s2" value="2"> Sense 2: Land beside water</label>
            </div>
        </section>

        <section class="section">
            <h2>Part 2: Fine-Grained Distinctions</h2>
            <div class="word-box">
                <div class="target-word">run</div>
            </div>

            <div class="sense-card">
                <div class="sense-id">Sense 1:</div>
                <div class="sense-def">Move at a speed faster than a walk</div>
                <div class="sense-example">"She runs every morning for exercise."</div>
            </div>
            <div class="sense-card">
                <div class="sense-id">Sense 2:</div>
                <div class="sense-def">Operate or function</div>
                <div class="sense-example">"The machine runs on electricity."</div>
            </div>
            <div class="sense-card">
                <div class="sense-id">Sense 3:</div>
                <div class="sense-def">Manage or direct</div>
                <div class="sense-example">"She runs a successful business."</div>
            </div>
            <div class="sense-card">
                <div class="sense-id">Sense 4:</div>
                <div class="sense-def">Extend or continue</div>
                <div class="sense-example">"The road runs along the coast."</div>
            </div>
            <div class="sense-card">
                <div class="sense-id">Sense 5:</div>
                <div class="sense-def">Be a candidate for office</div>
                <div class="sense-example">"He decided to run for president."</div>
            </div>

            <div class="sentence-box">
                <div class="label">Sentence 3:</div>
                <div class="sentence">"The software <span class="target">runs</span> smoothly on the new computer."</div>
            </div>
            <div class="sense-options">
                <label class="sense-option"><input type="radio" name="s3" value="1"> Sense 1: Move fast</label>
                <label class="sense-option"><input type="radio" name="s3" value="2"> Sense 2: Operate/function</label>
                <label class="sense-option"><input type="radio" name="s3" value="3"> Sense 3: Manage</label>
                <label class="sense-option"><input type="radio" name="s3" value="4"> Sense 4: Extend</label>
                <label class="sense-option"><input type="radio" name="s3" value="5"> Sense 5: Be a candidate</label>
            </div>

            <div class="sentence-box">
                <div class="label">Sentence 4:</div>
                <div class="sentence">"She <span class="target">runs</span> three restaurants downtown."</div>
            </div>
            <div class="sense-options">
                <label class="sense-option"><input type="radio" name="s4" value="1"> Sense 1: Move fast</label>
                <label class="sense-option"><input type="radio" name="s4" value="2"> Sense 2: Operate/function</label>
                <label class="sense-option"><input type="radio" name="s4" value="3"> Sense 3: Manage</label>
                <label class="sense-option"><input type="radio" name="s4" value="4"> Sense 4: Extend</label>
                <label class="sense-option"><input type="radio" name="s4" value="5"> Sense 5: Be a candidate</label>
            </div>

            <div class="question-box">
                <div class="q-header">Question 1</div>
                <p>Are Sense 2 (operate) and Sense 3 (manage) clearly distinct, or do they overlap?</p>
                <div class="input-group">
                    <textarea placeholder="Discuss the boundary between these senses..."></textarea>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Part 3: Ambiguous Cases</h2>
            <div class="sentence-box">
                <div class="label">Sentence 5:</div>
                <div class="sentence">"She <span class="target">runs</span> the program every day."</div>
            </div>

            <div class="question-box">
                <div class="q-header">Question 2</div>
                <p>This sentence is ambiguous. "Program" could be software (Sense 2) or an organization/initiative (Sense 3). How should this be annotated?</p>
                <button class="toggle-btn" onclick="toggleChoices(this)">Show Choices</button>
                <div class="choices-container">
                    <div class="radio-options" style="flex-direction: column; gap: 8px;">
                        <label class="radio-option"><input type="radio" name="q2" value="most-likely"> Choose the most likely sense</label>
                        <label class="radio-option"><input type="radio" name="q2" value="both"> Mark both senses as possible</label>
                        <label class="radio-option"><input type="radio" name="q2" value="ambiguous"> Label as "ambiguous"</label>
                        <label class="radio-option"><input type="radio" name="q2" value="skip"> Skip ambiguous cases</label>
                    </div>
                </div>
                <div class="input-group">
                    <label>What information would disambiguate this sentence?</label>
                    <textarea placeholder="What context would help?"></textarea>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Part 4: Sense Granularity</h2>
            <div class="question-box">
                <div class="q-header">Question 3</div>
                <p>WordNet lists over 40 senses for the verb "run". Is this level of granularity helpful or harmful for annotation?</p>
                <button class="toggle-btn" onclick="toggleChoices(this)">Show Choices</button>
                <div class="choices-container">
                    <div class="radio-options" style="flex-direction: column; gap: 8px;">
                        <label class="radio-option"><input type="radio" name="q3" value="helpful"> Helpful: captures nuanced meanings</label>
                        <label class="radio-option"><input type="radio" name="q3" value="harmful"> Harmful: too many distinctions to reliably annotate</label>
                        <label class="radio-option"><input type="radio" name="q3" value="depends"> Depends on the application</label>
                        <label class="radio-option"><input type="radio" name="q3" value="coarse"> Should use coarser senses</label>
                    </div>
                </div>
                <div class="input-group">
                    <label>What's the right level of granularity?</label>
                    <textarea placeholder="Discuss the trade-offs..."></textarea>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Part 5: Novel or Extended Senses</h2>
            <div class="sentence-box">
                <div class="label">Sentence 6:</div>
                <div class="sentence">"The video <span class="target">went viral</span> overnight."</div>
            </div>

            <div class="question-box">
                <div class="q-header">Question 4</div>
                <p>"Viral" traditionally means "relating to a virus." Here it means "spreading rapidly online." How should new/metaphorical senses be handled?</p>
                <button class="toggle-btn" onclick="toggleChoices(this)">Show Choices</button>
                <div class="choices-container">
                    <div class="radio-options" style="flex-direction: column; gap: 8px;">
                        <label class="radio-option"><input type="radio" name="q4" value="original"> Map to closest original sense</label>
                        <label class="radio-option"><input type="radio" name="q4" value="new"> Create a new sense entry</label>
                        <label class="radio-option"><input type="radio" name="q4" value="metaphor"> Mark as metaphorical extension</label>
                        <label class="radio-option"><input type="radio" name="q4" value="none"> Mark as "sense not in inventory"</label>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Part 6: Group Discussion</h2>
            <div class="question-box">
                <div class="q-header">Question 5</div>
                <p>Compare annotations with your group. Where did you disagree?</p>
                <button class="toggle-btn" onclick="toggleChoices(this)">Show Choices</button>
                <div class="choices-container">
                    <div class="checkbox-grid">
                        <label class="checkbox-option"><input type="checkbox" name="q5" value="fine"> Fine-grained distinctions</label>
                        <label class="checkbox-option"><input type="checkbox" name="q5" value="ambiguous"> Ambiguous cases</label>
                        <label class="checkbox-option"><input type="checkbox" name="q5" value="novel"> Novel/extended senses</label>
                        <label class="checkbox-option"><input type="checkbox" name="q5" value="context"> Context interpretation</label>
                    </div>
                </div>
                <div class="input-group">
                    <label>Describe one specific disagreement:</label>
                    <textarea placeholder="What caused the disagreement?"></textarea>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Reflection</h2>
            <div class="takeaway-box">
                <h3>Key Takeaway</h3>
                <p><strong>WSD annotation depends heavily on the sense inventory's design, and perfect agreement is often impossible when senses overlap or extend beyond predefined categories.</strong></p>
                <ul>
                    <li>Sense boundaries are often fuzzy, not crisp</li>
                    <li>Too fine-grained = low agreement; too coarse = lost information</li>
                    <li>Language evolves; inventories may not capture new uses</li>
                    <li>Some ambiguity is genuine and should be preserved</li>
                </ul>
            </div>
        </section>
    </div>

    <div class="toolbar">
        <button class="btn-clear" onclick="clearForm()">Clear All</button>
        <button class="btn-print" onclick="window.print()">Print / Save PDF</button>
    </div>

    <script>
        function toggleChoices(btn) { const c = btn.nextElementSibling; c.classList.toggle('show'); btn.classList.toggle('active'); btn.textContent = c.classList.contains('show') ? 'Hide Choices' : 'Show Choices'; }
        function clearForm() { if (confirm('Clear all?')) { document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(i => i.checked = false); document.querySelectorAll('textarea').forEach(i => i.value = ''); document.querySelectorAll('.choices-container').forEach(c => c.classList.remove('show')); document.querySelectorAll('.toggle-btn').forEach(b => { b.classList.remove('active'); b.textContent = 'Show Choices'; }); localStorage.removeItem('wsd-worksheet'); } }
        function saveProgress() { const data = { radios: {}, checkboxes: {}, textareas: [] }; document.querySelectorAll('input[type="radio"]:checked').forEach(r => data.radios[r.name] = r.value); document.querySelectorAll('input[type="checkbox"]:checked').forEach(c => { if (!data.checkboxes[c.name]) data.checkboxes[c.name] = []; data.checkboxes[c.name].push(c.value); }); document.querySelectorAll('textarea').forEach((t, i) => data.textareas[i] = t.value); localStorage.setItem('wsd-worksheet', JSON.stringify(data)); }
        function loadProgress() { const saved = localStorage.getItem('wsd-worksheet'); if (!saved) return; try { const data = JSON.parse(saved); Object.entries(data.radios || {}).forEach(([n, v]) => { const r = document.querySelector(`input[type="radio"][name="${n}"][value="${v}"]`); if (r) r.checked = true; }); Object.entries(data.checkboxes || {}).forEach(([n, vs]) => { vs.forEach(v => { const c = document.querySelector(`input[type="checkbox"][name="${n}"][value="${v}"]`); if (c) c.checked = true; }); }); document.querySelectorAll('textarea').forEach((t, i) => { if (data.textareas?.[i]) t.value = data.textareas[i]; }); } catch (e) { console.error(e); } }
        document.addEventListener('DOMContentLoaded', loadProgress); document.addEventListener('change', saveProgress); document.addEventListener('input', saveProgress);
    </script>

    <!-- Classroom Response System -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="classroom-submit.js"></script>

</body>
</html>
